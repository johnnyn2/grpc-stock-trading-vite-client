# React (Vite) + Envoy (Proxy) + Spring Boot (gRPC)

This repository demostrate how web frontend can interact with backend using gRPC. 

Currently, two gRPC modes (unary and server-streaming) are implemented. Client-streaming and multi-dimensional modes are not not implemented:

Browser doesn't support HTTP/2 which is used by gRPC so it needs Envoy proxy to convert HTTP/1 to HTTP/2 request to the backend.

### Repository
- [grpc-stock-trading-vite-client](https://github.com/johnnyn2/grpc-stock-trading-vite-client) : Browser frontend
- [grpc-stock-trading-envoy](https://github.com/johnnyn2/grpc-stock-trading-envoy) : Envoy Proxy
- [grpc-stock-trading-server](https://github.com/johnnyn2/grpc-stock-trading-server) : gRPC backend server
- [grpc-stock-trading-client](https://github.com/johnnyn2/grpc-stock-trading-client) : gRPC service client

## Setup
### Generate HTTP client
gRPC client is generated by protoc. Use below command
```
npx protoc --ts_out ./src/generated --proto_path protos protos/stock_trading.proto
```
or 
```
npm run generate
```

### Run vite
```
npm run dev
```

### Open [grpc-stock-trading-envoy](https://github.com/johnnyn2/grpc-stock-trading-envoy) to setup Envoy Proxy

```
docker-compose up
```

### Open [grpc-stock-trading-server](https://github.com/johnnyn2/grpc-stock-trading-server) to setup gRPC server

Generate Impl classes and then run Spring Boot
```
mvn clean install
```

## Reference

- [Using gRPC in React the Modern Way: From gRPC-web to Connect](https://dev.to/arichy/using-grpc-in-react-the-modern-way-from-grpc-web-to-connect-41lc)
